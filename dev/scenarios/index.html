<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Release Scenarios · GasDispersion.jl Documentation</title><meta name="title" content="Release Scenarios · GasDispersion.jl Documentation"/><meta property="og:title" content="Release Scenarios · GasDispersion.jl Documentation"/><meta property="twitter:title" content="Release Scenarios · GasDispersion.jl Documentation"/><meta name="description" content="Documentation for GasDispersion.jl Documentation."/><meta property="og:description" content="Documentation for GasDispersion.jl Documentation."/><meta property="twitter:description" content="Documentation for GasDispersion.jl Documentation."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href>GasDispersion.jl Documentation</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li class="is-active"><a class="tocitem" href>Release Scenarios</a><ul class="internal"><li><a class="tocitem" href="#Substances"><span>Substances</span></a></li><li><a class="tocitem" href="#Releases"><span>Releases</span></a></li><li><a class="tocitem" href="#Atmospheres"><span>Atmospheres</span></a></li><li><a class="tocitem" href="#Scenarios"><span>Scenarios</span></a></li><li><a class="tocitem" href="#Scenario-Builder"><span>Scenario Builder</span></a></li></ul></li><li><a class="tocitem" href="../plume/">Plume Models</a></li><li><a class="tocitem" href="../puff/">Puff Models</a></li><li><a class="tocitem" href="../equation_sets/">Equation Sets</a></li><li><a class="tocitem" href="../references/">References</a></li><li><a class="tocitem" href="../function_index/">Function Index</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Release Scenarios</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Release Scenarios</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/aefarrell/GasDispersion.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/aefarrell/GasDispersion.jl/blob/main/docs/src/scenarios.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Release-Scenarios"><a class="docs-heading-anchor" href="#Release-Scenarios">Release Scenarios</a><a id="Release-Scenarios-1"></a><a class="docs-heading-anchor-permalink" href="#Release-Scenarios" title="Permalink"></a></h1><p><code>GasDispersion.jl</code> is centered around modeling the effects of chemical release scenarios, as such the core data structure is the <code>Scenario</code>. A <code>Scenario</code> is a container for all of the information that a model may need to produce a solution. The intention is for the <code>Scenario</code> to be re-usable, so that the user may run the same scenario with multiple models and have an &quot;apples to apples&quot; comparison of the performance of those models.</p><p>A scenario is composed of three basic parts: </p><ol><li>a <code>Substance</code> – the chemical substance being released</li><li>a <code>Release</code> – the actual event taking place, such as a jet of liquid or emissions from a stack </li><li>an <code>Atmosphere</code> – the environment into which the substance is being released</li></ol><h2 id="Substances"><a class="docs-heading-anchor" href="#Substances">Substances</a><a id="Substances-1"></a><a class="docs-heading-anchor-permalink" href="#Substances" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GasDispersion.Substance" href="#GasDispersion.Substance"><code>GasDispersion.Substance</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">Substance{N,VAP,D_G,D_L,F,H,CP_G,CP_L}(;kwargs...)</code></pre><p>A simple container for the physical and thermal properties of substances.</p><p><code>vapor_pressure</code>, <code>latent_heat</code>, <code>gas_heat_capacity</code>, and <code>liquid_heat_capacity</code> can be functions of temperature (in Kelvin) or constants.</p><p><code>gas_density</code> and <code>liquid_density</code> can be functions of temperature (in Kelvin) and pressure (in Pascal) or constants.</p><p><strong>Arguments</strong></p><ul><li><code>name&lt;:Union{AbstractString,Symbol}</code>: the name of the substance</li><li><code>molar_weight::Number</code>: the molar weight, kg/mol</li><li><code>vapor_pressure&lt;:Union{Number,Function,Nothing}=nothing</code>: the vapor pressure, Pa. If <code>nothing</code> then the Clausius-Clapeyron equation is used to derive a vapor pressure curve</li><li><code>gas_density&lt;:Union{Number,Function,Nothing}=nothing</code>: the gas density, kg/m³. If <code>nothing</code> the ideal gas law is used.</li><li><code>liquid_density&lt;:Union{Number,Function}</code>: the liquid density, kg/m³.</li><li><code>reference_temp::Number=288.15</code>: the reference temperature for the given properties, K.</li><li><code>reference_pressure::Number=101325</code>: the reference pressure for the given properties, Pa.</li><li><code>k::Number=1.4</code>: the isentropic expansion factor, cp/cv, unitless.</li><li><code>boiling_temp&lt;:Union{Number,Function}::Number</code>: the normal boiling temperature, K.</li><li><code>latent_heat&lt;:Union{Number,Function}</code>: the latent heat of vaporization, J/kg.</li><li><code>gas_heat_capacity&lt;:Union{Number,Function}</code>: the gas heat capacity, J/kg/K.</li><li><code>liquid_heat_capacity&lt;:Union{Number,Function}</code>: the liquid heat capacity, J/kg/K.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aefarrell/GasDispersion.jl/blob/16b68ea1ff5d6bb13bfff8064736a099c6d4fb00/src/base/base_types.jl#L24-L47">source</a></section></article><p>A substance is defined using the <code>Substance</code> type, this is a container for the physical properties of the substance. The container is not, by default, unit-aware and assumes that all properties are in the SI base units, e.g. temperatures are in Kelvin, pressures in Pascal, etc.</p><p>As an example, here is a minimal implementation of propane:</p><pre><code class="language-julia hljs">
using GasDispersion

s = Substance(name=&quot;propane&quot;,
              molar_weight=0.044096,     # kg/mol
              liquid_density=526.13,     # kg/m³
              boiling_temp=231.02,       # K
              latent_heat=425740,        # J/kg
              gas_heat_capacity=1678,    # J/kg/K
              liquid_heat_capacity=2520) # J/kg/K

# output

Substance: propane
    MW: 0.044096 kg/mol
    P_v: GasDispersion.Antoine{Float64}(9.773719865868816, 2257.9247634130143, 0.0) Pa
    ρ_g: 1.864931992847327 kg/m^3
    ρ_l: 526.13 kg/m^3
    T_ref: 288.15 K
    P_ref: 101325.0 Pa
    k: 1.4
    T_b: 231.02 K
    Δh_v: 425740 J/kg
    Cp_g: 1678 J/kg/K
    Cp_l: 2520 J/kg/K
</code></pre><p>Note that the <code>Substance</code> has filled in some missing details. In particular it has calculateed the gas density <code>ρ_g</code>` at the reference point using the ideal gas law and has used the <a href="https://en.wikipedia.org/wiki/Clausius%E2%80%93Clapeyron_relation">Clausius-Clapeyron equation</a> to derive a vapour pressure curve from the latent heat and the boiling temperature. It has also used a default value of 1.4 for <a href="https://en.wikipedia.org/wiki/Heat_capacity_ratio">isentropic expansion factor</a></p><div class="admonition is-info" id="Note-e78748bacab3a5ff"><header class="admonition-header">Note<a class="admonition-anchor" href="#Note-e78748bacab3a5ff" title="Permalink"></a></header><div class="admonition-body"><p>A package extension exists for <a href="https://github.com/ClapeyronThermo/Clapeyron.jl">Clapeyron.jl</a> that eliminates much of the hassle of creating <code>Substance</code>s. This requires julia &gt;1.9 (it depends on the package extension feature) but allows one to create a <code>Substance</code> directly from a Clapeyron <code>EOSModel</code> object. For example, using the reference equation of state <code>PropaneRef()</code> from Clapeyron:</p><pre><code class="language-julia hljs">using GasDispersion, Clapeyron

s = Substance(PropaneRef())

# output

GasDispersionClapeyronExt.ClapeyronSubstance: propane 
    MW: 0.044095619999999995 kg/mol 
    T_ref: 288.15 K 
    P_ref: 101325.0 Pa 
    k: 1.1416338312956256  
    T_b: 231.03621464431782 K</code></pre><p>The other properties, such as vapor pressure and latent heat, are calculated on demand using the relevant routines from Clapeyron.</p></div></div><p>In general several of the physical properties are functions of temperature and/or pressure, and they can be given as such. Since substances are re-usable, once defined they can be reused with many different scenarios, it may be worthwhile to find appropriate correlations for all of the physical and thermal properties of a substance. That said, it is not necessary.</p><h3 id="Vapor-Pressure"><a class="docs-heading-anchor" href="#Vapor-Pressure">Vapor Pressure</a><a id="Vapor-Pressure-1"></a><a class="docs-heading-anchor-permalink" href="#Vapor-Pressure" title="Permalink"></a></h3><p>The <code>vapor_pressure</code> can be given as a constant, a function of temperature, or omitted entirely and the <a href="https://en.wikipedia.org/wiki/Clausius%E2%80%93Clapeyron_relation">Clausius-Clapeyron equation</a> will be used to derive a vapour pressure curve automatically.</p><h3 id="Densities"><a class="docs-heading-anchor" href="#Densities">Densities</a><a id="Densities-1"></a><a class="docs-heading-anchor-permalink" href="#Densities" title="Permalink"></a></h3><p>The <code>liquid_density</code> and <code>gas_density</code> can be either constants, in which case the liquid density is assumed to be always constant and the gas density scaled using the ideal gas law (assuming the given gas density is at the reference temperature and pressure). Or they can be given as a function of temperature and pressure.</p><p>If the <code>gas_density</code> is omitted then the ideal gas law will be used by default.</p><h3 id="Thermal-Properties"><a class="docs-heading-anchor" href="#Thermal-Properties">Thermal Properties</a><a id="Thermal-Properties-1"></a><a class="docs-heading-anchor-permalink" href="#Thermal-Properties" title="Permalink"></a></h3><p>The <code>latent_heat</code>, the <code>gas_heat_capacity</code>, and the <code>liquid_heat_capacity</code> can either be constants or be given as functions of temperature.</p><p>Suppose we want a more complete model of propane, using some physical property correlations for the vapor pressure, liquid density, latent heat, and heat capacities (but still assuming an ideal gas).</p><pre><code class="language-julia hljs">using GasDispersion

# vapor pressure curve, Perry&#39;s 8th edition
function Pv(T)
    C1 = 59.078
    C2 = -3_492.6
    C3 = -6.0669
    C4 = 1.0919e-5
    C5 = 2
    lnP = C1 + C2/T + C3*log(T) + C4*T^C5
    return exp(lnP)
end

# liquid density curve, Perry&#39;s 8th edition
function ρl(T,P)
    MW = 0.044096
    C1 = 1.3757
    C2 = 0.27453
    C3 = 369.83
    C4 = 0.29359
    ρl = C1/( C2^(1 + (1 - T/C3)^C4) )
    return ρl*MW*1000
end

# latent heat curve, Perry&#39;s 8th edition
function LH(T)
    MW = 0.044096
    Tc = 369.83
    C1 = 2.9209e7
    C2 = 0.78237
    C3 = -0.77319
    C4 = 0.39246
    C5 = 0
    Tr = T/Tc
    ΔHv = C1*(1-Tr)^(C2 + C3*Tr + C4*Tr^2 + C5*Tr^3)
    return ΔHv/(MW*1000)
end

# gas heat capacity, Perry&#39;s 8th edition
function cpg(T)
    MW = 0.044096
    C1 = 0.5192e5
    C2 = 1.9245e5
    C3 = 1.6265e3
    C4 = 1.168e5
    C5 = 723.6
    Cp = C1 + C2*((C3/T)/sinh(C3/T))^2 + C4*((C5/T)/cosh(C5/T))^2
    return Cp/(MW*1000)
end

# liquid heat capacity, Perry&#39;s 8th edition
function cpl(T)
    MW = 0.044096
    Tc = 369.83
    C1 = 62.983
    C2 = 113_630
    C3 = 633.21
    C4 = -873.46
    Tr = T/Tc
    t = 1-Tr
    Cp = C1^2/t + C2 - 2*C1*C3*t - C1*C4*t^2 - C3^2*t^3/3 - C3*C4*t^4/2 - C4^2*t^5/5
    return Cp/(MW*1000)
end

s = Substance(name=&quot;propane&quot;,
              molar_weight=0.044096, # kg/mol
              vapor_pressure=Pv,   
              liquid_density=ρl,
              k=1.142,
              boiling_temp=231.02,   # K
              latent_heat=LH,
              gas_heat_capacity=cpg,
              liquid_heat_capacity=cpl)

# output

Substance: propane
    MW: 0.044096 kg/mol
    P_v: Pv Pa
    ρ_g: 1.864931992847327 kg/m^3
    ρ_l: ρl kg/m^3
    T_ref: 288.15 K
    P_ref: 101325.0 Pa
    k: 1.142
    T_b: 231.02 K
    Δh_v: LH J/kg
    Cp_g: cpg J/kg/K
    Cp_l: cpl J/kg/K</code></pre><h2 id="Releases"><a class="docs-heading-anchor" href="#Releases">Releases</a><a id="Releases-1"></a><a class="docs-heading-anchor-permalink" href="#Releases" title="Permalink"></a></h2><p>A release is defined using one of the release types, this is a container for the specific event being modeled. For example a horizontal jet of liquid is a type of release. It is independent of the specific substance and of the environment into which it is being released.</p><h3 id="Horizontal-Jets"><a class="docs-heading-anchor" href="#Horizontal-Jets">Horizontal Jets</a><a id="Horizontal-Jets-1"></a><a class="docs-heading-anchor-permalink" href="#Horizontal-Jets" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GasDispersion.HorizontalJet" href="#GasDispersion.HorizontalJet"><code>GasDispersion.HorizontalJet</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">HorizontalJet{&lt;:Number}(;kwargs...)&lt;:Release</code></pre><p>A simple container for parameters of a horizontal jet release.</p><p><strong>Arguments</strong></p><ul><li><code>mass_rate::Number</code>: the mass emission rate of the substance, kg/s.</li><li><code>duration::Number</code>: the duration of the release, s.</li><li><code>diameter::Number</code>: the diameter of the jet, m.</li><li><code>velocity::Number</code>: the average velocity of the jet, m/s.</li><li><code>height::Number</code>: the height of the jet center, m.</li><li><code>pressure::Number</code>: the pressure at the jet exit, Pa.</li><li><code>temperature::Number</code>: the temperature at the jet exit, K.</li><li><code>fraction_liquid::Number</code>: the fraction of the release that is liquid (for gas liquid mixtures), vol fraction.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aefarrell/GasDispersion.jl/blob/16b68ea1ff5d6bb13bfff8064736a099c6d4fb00/src/base/base_types.jl#L163-L178">source</a></section></article><p>A horizontal jet is a jet of fluid, generally assumed to be perfectly horizontal, with a constant mass emission rate over a fixed duration.</p><p>For example, suppose the release scenario is a horizontal liquid jet of propane, at the boiling point of propane, being emitted from a 10mm hole situated 1m above the ground. The release could look something like this:</p><pre><code class="language-julia hljs">using GasDispersion

r = HorizontalJet(mass_rate=0.246,    # kg/s
                  duration=10,        # s
                  diameter=0.01,      # m
                  velocity=5.41,      # m/s
                  height=1,           # m
                  pressure=101325,    # Pa
                  temperature=233.19, # K
                  fraction_liquid=1.0)

# output

HorizontalJet release:
    ṁ: 0.246 kg/s
    Δt: 10.0 s
    d: 0.01 m
    u: 5.41 m/s
    h: 1.0 m
    P: 101325.0 Pa
    T: 233.19 K
    f_l: 1.0

</code></pre><h3 id="Vertical-Jets"><a class="docs-heading-anchor" href="#Vertical-Jets">Vertical Jets</a><a id="Vertical-Jets-1"></a><a class="docs-heading-anchor-permalink" href="#Vertical-Jets" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GasDispersion.VerticalJet" href="#GasDispersion.VerticalJet"><code>GasDispersion.VerticalJet</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">VerticalJet{&lt;:Number}(;kwargs...)&lt;:Release</code></pre><p>A simple container for parameters of a vertical jet release.</p><p><strong>Arguments</strong></p><ul><li><code>mass_rate::Number</code>: the mass emission rate of the substance, kg/s.</li><li><code>duration::Number</code>: the duration of the release, s.</li><li><code>diameter::Number</code>: the diameter of the jet, m.</li><li><code>velocity::Number</code>: the average velocity of the jet, m/s.</li><li><code>height::Number</code>: the height of the jet center, m.</li><li><code>pressure::Number</code>: the pressure at the jet exit, Pa.</li><li><code>temperature::Number</code>: the temperature at the jet exit, K.</li><li><code>fraction_liquid::Number</code>: the fraction of the release that is liquid (for gas liquid mixtures), vol fraction.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aefarrell/GasDispersion.jl/blob/16b68ea1ff5d6bb13bfff8064736a099c6d4fb00/src/base/base_types.jl#L194-L209">source</a></section></article><p>Similarly a vertical jet is a jet of fluid being emitted directly upward, with a constant mass emission rate over a fixed duration.</p><p>For example, supposing the same release scenario as above, but with the liquid jet of propane directed upwards:</p><pre><code class="language-julia hljs">using GasDispersion

r = VerticalJet(mass_rate=0.246,    # kg/s
                duration=10,        # s
                diameter=0.01,      # m
                velocity=5.41,      # m/s
                height=1,           # m
                pressure=101325,    # Pa
                temperature=233.19, # K
                fraction_liquid=1.0)

# output

VerticalJet release:
    ṁ: 0.246 kg/s
    Δt: 10.0 s
    d: 0.01 m
    u: 5.41 m/s
    h: 1.0 m
    P: 101325.0 Pa
    T: 233.19 K
    f_l: 1.0

</code></pre><p>Since a release is often a function of the substance and, potentially, the atmosphere, it is more commonly generated using the <a href="#Scenario-Builder">scenario builder</a>. Though for convenience they can be created directly, for example when replicating the results of modeling done with other tools.</p><h2 id="Atmospheres"><a class="docs-heading-anchor" href="#Atmospheres">Atmospheres</a><a id="Atmospheres-1"></a><a class="docs-heading-anchor-permalink" href="#Atmospheres" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GasDispersion.SimpleAtmosphere" href="#GasDispersion.SimpleAtmosphere"><code>GasDispersion.SimpleAtmosphere</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">SimpleAtmosphere{&lt;:Number,&lt;:StabilityClass}(kwargs...)&lt;:Atmosphere</code></pre><p>A simple model of the atmosphere.</p><p><strong>Arguments</strong></p><ul><li><code>pressure::Number=101325</code>: atmospheric pressure, Pa</li><li><code>temperature::Number=298.15</code>: ambient pressure, K</li><li><code>windspeed::Number=1.5</code>: windspeed at anemometer height, m/s</li><li><code>windspeed_height::Number=10</code>: anemometer height, m</li><li><code>rel_humidity::Number=0</code>: relative humidity, %</li><li><code>stability::StabilityClass=ClassF()</code>: Pasquill-Gifford stability class</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aefarrell/GasDispersion.jl/blob/16b68ea1ff5d6bb13bfff8064736a099c6d4fb00/src/base/simple_atmosphere.jl#L25-L38">source</a></section></article><p>The atmosphere defines the atmospheric conditions, and structure, for the release scenario. The default atmosphere is dry air at 25C and 1atm with a windspeed of 1.5m/s and a class F <a href="https://en.wikipedia.org/wiki/Outline_of_air_pollution_dispersion#Characterization_of_atmospheric_turbulence">Pasquill-Gifford stability</a>.</p><pre><code class="language-julia hljs">using GasDispersion

a = SimpleAtmosphere()

# output

SimpleAtmosphere atmosphere:
    P: 101325.0 Pa
    T: 298.15 K
    u: 1.5 m/s
    h: 10.0 m
    rh: 0.0 %
    stability: ClassF()
</code></pre><p>A <code>SimpleAtmosphere</code> has several non-editable default values, defined when used with more complex dispersion models:</p><ul><li>the surface roughness <span>$z_R$</span> is 1m</li><li>the stability parameter for Briggs&#39; plume rise model uses default values for the potential temperature gradient of 0.020K/m for class E stability and 0.035K/m for class F stability(<a href="../references/">US EPA 1995</a>, 1-9)</li></ul><h3 id="Stability-Class"><a class="docs-heading-anchor" href="#Stability-Class">Stability Class</a><a id="Stability-Class-1"></a><a class="docs-heading-anchor-permalink" href="#Stability-Class" title="Permalink"></a></h3><p>The stability classes are of type <code>StabilityClass</code> and are used, internally, for function dispatch. They are <code>ClassA()</code> through <code>ClassF()</code>. For example, to create an atmosphere with the default properties but <code>ClassD()</code> stability:</p><pre><code class="language-julia hljs">using GasDispersion

a = SimpleAtmosphere(stability=ClassD())

# output

SimpleAtmosphere atmosphere:
    P: 101325.0 Pa
    T: 298.15 K
    u: 1.5 m/s
    h: 10.0 m
    rh: 0.0 %
    stability: ClassD()
</code></pre><h3 id="Windspeed"><a class="docs-heading-anchor" href="#Windspeed">Windspeed</a><a id="Windspeed-1"></a><a class="docs-heading-anchor-permalink" href="#Windspeed" title="Permalink"></a></h3><p>The wind profile for a <code>SimpleAtmosphere</code> is calculated from the given windspeed and reference height (anemometer height) using a power law relation. The windspeed, <span>$u$</span>, at the release height, <span>$h$</span>, is given by</p><p class="math-container">\[ u = u_{R} \left( h \over h_{R} \right)^{\alpha}\]</p><p>Where <span>$u_{R}$</span> is the reference windspeed set for the <code>SimpleAtmosphere</code> and <span>$h_{R}$</span> is the reference height for that windspeed (i.e. the anemometer height). The parameter <span>$\alpha$</span> is tabulated based on stability class. The default values are given below, additional correlations are provided, see <a href="../equation_sets/">equation sets</a> for more details.</p><table><tr><th style="text-align: center">Stability Class</th><th style="text-align: center"><span>$\alpha$</span></th></tr><tr><td style="text-align: center">A</td><td style="text-align: center">0.108</td></tr><tr><td style="text-align: center">B</td><td style="text-align: center">0.112</td></tr><tr><td style="text-align: center">C</td><td style="text-align: center">0.120</td></tr><tr><td style="text-align: center">D</td><td style="text-align: center">0.142</td></tr><tr><td style="text-align: center">E</td><td style="text-align: center">0.203</td></tr><tr><td style="text-align: center">F</td><td style="text-align: center">0.253</td></tr></table><p>For a reference windspeed of 1.5m/s at 10m this looks like:</p><p><img src="../default_windspeed.svg" alt/></p><h2 id="Scenarios"><a class="docs-heading-anchor" href="#Scenarios">Scenarios</a><a id="Scenarios-1"></a><a class="docs-heading-anchor-permalink" href="#Scenarios" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GasDispersion.Scenario" href="#GasDispersion.Scenario"><code>GasDispersion.Scenario</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">Scenario{&lt;:Substance,&lt;:Release,&lt;:Atmosphere}(s&lt;:Substance,r&lt;:Release,a&lt;:Atmosphere=SimpleAtmosphere())</code></pre><p>A chemical release scenario.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aefarrell/GasDispersion.jl/blob/16b68ea1ff5d6bb13bfff8064736a099c6d4fb00/src/base/base_types.jl#L288-L293">source</a></section></article><p>The <code>Scenario</code> container simply collects together the <code>Substance</code>, <code>Release</code>, and <code>Atmosphere</code> in a re-usable way and with a consistent interface.</p><pre><code class="language-julia hljs">
using GasDispersion

s = Substance(name=&quot;propane&quot;,
              molar_weight=0.044096,     # kg/mol
              liquid_density=526.13,     # kg/m³
              boiling_temp=231.02,       # K
              latent_heat=425740,        # J/kg
              gas_heat_capacity=1678,    # J/kg/K
              liquid_heat_capacity=2520) # J/kg/K

r = HorizontalJet(mass_rate=0.246,    # kg/s
                  duration=10,        # s
                  diameter=0.01,      # m
                  velocity=5.41,      # m/s
                  height=1,           # m
                  pressure=101325,    # Pa
                  temperature=233.19, # K
                  fraction_liquid=1.0)

scn = Scenario(s,r)

# output

Substance: propane
    MW: 0.044096 kg/mol
    P_v: GasDispersion.Antoine{Float64}(9.773719865868816, 2257.9247634130143, 0.0) Pa
    ρ_g: 1.864931992847327 kg/m^3
    ρ_l: 526.13 kg/m^3
    T_ref: 288.15 K
    P_ref: 101325.0 Pa
    k: 1.4
    T_b: 231.02 K
    Δh_v: 425740 J/kg
    Cp_g: 1678 J/kg/K
    Cp_l: 2520 J/kg/K
HorizontalJet release:
    ṁ: 0.246 kg/s
    Δt: 10.0 s
    d: 0.01 m
    u: 5.41 m/s
    h: 1.0 m
    P: 101325.0 Pa
    T: 233.19 K
    f_l: 1.0
SimpleAtmosphere atmosphere:
    P: 101325.0 Pa
    T: 298.15 K
    u: 1.5 m/s
    h: 10.0 m
    rh: 0.0 %
    stability: ClassF()

</code></pre><h2 id="Scenario-Builder"><a class="docs-heading-anchor" href="#Scenario-Builder">Scenario Builder</a><a id="Scenario-Builder-1"></a><a class="docs-heading-anchor-permalink" href="#Scenario-Builder" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GasDispersion.scenario_builder" href="#GasDispersion.scenario_builder"><code>GasDispersion.scenario_builder</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">scenario_builder(substance::Substance, source::SourceModel, atmosphere::Atmosphere)</code></pre><p>Builds a scenario given a substance, source model and an atmosphere. If no atmosphere is given defaults to dry air at ambient conditions and class F stability.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aefarrell/GasDispersion.jl/blob/16b68ea1ff5d6bb13bfff8064736a099c6d4fb00/src/GasDispersion.jl#L127-L134">source</a></section></article><p>Constructiong scenarios by hand can be incredibly tedious, the <code>scenario_builder</code> function is intended to help with this. It generates release scenarios for common situations given minimal input.</p><h3 id="Horizontal-Jets-2"><a class="docs-heading-anchor" href="#Horizontal-Jets-2">Horizontal Jets</a><a class="docs-heading-anchor-permalink" href="#Horizontal-Jets-2" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GasDispersion.scenario_builder-Tuple{Substance, JetSource, Atmosphere}" href="#GasDispersion.scenario_builder-Tuple{Substance, JetSource, Atmosphere}"><code>GasDispersion.scenario_builder</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">scenario_builder(substance::AbstractSubstance, ::JetSource, atmosphere::Atmosphere; kwargs...)</code></pre><p>Returns returns a scenario for a simple jet from a circular hole. The jet can either be a liquid or a gas (in which case it is assumed to be an ideal gas and the jet is isentropic).</p><p><strong>References</strong></p><ul><li>AIChE/CCPS. 1999. <em>Guidelines for Consequence Analysis of Chemical Releases</em>. New York: American Institute of Chemical Engineers</li></ul><p><strong>Arguments</strong></p><ul><li><code>phase=:liquid</code>: the phase, either :liquid or :gas</li><li><code>dischargecoef::Number=0.61</code>: the discharge coefficient cd</li><li><code>diameter::Number</code>: the diameter of the hole, m</li><li><code>height::Number</code>: the height of the hole, m</li><li><code>pressure::Number</code>: the pressure upstream of the jet, Pa</li><li><code>temperature::Number</code>: the temperature upstream of the jet, K</li><li><code>duration::Number</code>: the duration of the leak, s</li><li><code>jet=:horizontal</code>: the type of jet, either :horizontal or :vertical</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aefarrell/GasDispersion.jl/blob/16b68ea1ff5d6bb13bfff8064736a099c6d4fb00/src/source_models/jet_source.jl#L10">source</a></section></article><p>A release of a fluid from a storage vessel is often modeled as a jet. Given a substance and an atmosphere, <code>scenario_builder</code> will generate the corresponding release for either a liquid or gaseous jet.</p><p>When a liquid jet is selected the Bernoulli equation is used(<a href="../references/">AIChE/CCPS 1999</a>, 26):</p><p class="math-container">\[u_j = c_d  \sqrt{ 2 \left( P_1 - P_2 \over \rho_l \right) }\]</p><p>When a gaseous jet is selected a modified Bernoulli equation for an ideal gas exiting through an isentropic nozzle is used(<a href="../references/">AIChE/CCPS 1999</a>, 30), for non-choked flow:</p><p class="math-container">\[ G = \rho u = c_d \sqrt{ \rho_1 P_1 \left( 2 k \over k-1 \right) \left[ \left(P_2 \over P_1\right)^{2 \over k} - \left(P_2 \over P_1\right)^{k+1 \over k} \right]}\]</p><p>and for choked flow:</p><p class="math-container">\[ G = c_d \sqrt{ \rho_1 P_1 k \left( 2 \over k+1 \right)^{k+1 \over k-1} } \]</p><p>where flow is choked when:</p><p class="math-container">\[\left(P_2 \over P_1 \right) \lt \left( 2 \over k+1 \right)^{k \over k-1}\]</p><p>The relations for isentropic flow of an ideal gas are used to calculate the release temperature, and pressure as well.</p><p>The jet orifice is assumed to be a circular hole with a default discharge coefficient of 0.63.</p><p>Suppose we are evaluating the consequences of a leak from a propane storage tank. For the purposes of this suppose it is liquid propane. The leak is from a 10mm hole situated 1m above the ground and the tank head-space is pressurized to 0.1barg with 2m of liquid propane above the hole. Assume the propane is at it&#39;s boiling point. This scenario is adapted from CCPS <em>Guidelines for Consequence Analysis of Chemical Releases</em>(<a href="../references/">AIChE/CCPS 1999</a>, 40).</p><p>First we define the substance, propane</p><pre><code class="language-julia hljs">
using GasDispersion

s = Substance(name=&quot;propane&quot;,
              molar_weight=0.044096,     # kg/mol
              liquid_density=526.13,     # kg/m³
              boiling_temp=231.02,       # K
              latent_heat=425740,        # J/kg
              gas_heat_capacity=1678,    # J/kg/K
              liquid_heat_capacity=2520) # J/kg/K</code></pre><p>Then we determine the pressure at the hole, which is simply the pressure in the tank head space plus the liquid head above the hole</p><pre><code class="language-julia hljs">P_atm = 101325 # Pa
P_head = 0.1e5 # 0.1 barg

g  = 9.80616 # m/s^2, gravitational acceleration
hₗ = 2 # m, height of liquid above the hole

P1_gauge = P_head + s.ρ_l*g*hₗ
P1 = P1_gauge + P_atm</code></pre><p>Finally the scenario, with a default atmosphere, is generated by</p><pre><code class="language-julia hljs">scn = scenario_builder(s, JetSource(); 
       phase = :liquid, # a liquid jet 
       diameter = 0.01, # m
       pressure = P1, # Pa
       temperature = s.T_b, # K
       height = 1.0) # m, height of hole above the ground

# output

Substance: propane
    MW: 0.044096 kg/mol
    P_v: GasDispersion.Antoine{Float64}(9.773719865868816, 2257.9247634130143, 0.0) Pa
    ρ_g: 1.864931992847327 kg/m^3
    ρ_l: 526.13 kg/m^3
    T_ref: 288.15 K
    P_ref: 101325.0 Pa
    k: 1.4
    T_b: 231.02 K
    Δh_v: 425740 J/kg
    Cp_g: 1678 J/kg/K
    Cp_l: 2520 J/kg/K
HorizontalJet release:
    ṁ: 0.22879112394689263 kg/s
    Δt: Inf s
    d: 0.01 m
    u: 5.536766702023982 m/s
    h: 1.0 m
    P: 101325.0 Pa
    T: 231.02 K
    f_l: 1.0
SimpleAtmosphere atmosphere:
    P: 101325.0 Pa
    T: 298.15 K
    u: 1.5 m/s
    h: 10.0 m
    rh: 0.0 %
    stability: ClassF()

</code></pre><p>If, instead, we wish to model the release from the top of the storage vessel, where the propane is a gas, say at a height of 3.5m, the scenario would be generated by</p><pre><code class="language-julia hljs">scn = scenario_builder(s, JetSource(); 
       phase = :gas, # an isentropic ideal gas jet
       diameter = 0.01, # m
       pressure = P_head+P_atm, # Pa
       temperature = s.T_b, # K
       height = 3.5) # m, height of hole above the ground

# output

Substance: propane
    MW: 0.044096 kg/mol
    P_v: GasDispersion.Antoine{Float64}(9.773719865868816, 2257.9247634130143, 0.0) Pa
    ρ_g: 1.864931992847327 kg/m^3
    ρ_l: 526.13 kg/m^3
    T_ref: 288.15 K
    P_ref: 101325.0 Pa
    k: 1.4
    T_b: 231.02 K
    Δh_v: 425740 J/kg
    Cp_g: 1678 J/kg/K
    Cp_l: 2520 J/kg/K
HorizontalJet release:
    ṁ: 0.010634767194389562 kg/s
    Δt: Inf s
    d: 0.01 m
    u: 56.66660301903551 m/s
    h: 3.5 m
    P: 101325.0 Pa
    T: 224.8902857468354 K
    f_l: 0.0
SimpleAtmosphere atmosphere:
    P: 101325.0 Pa
    T: 298.15 K
    u: 1.5 m/s
    h: 10.0 m
    rh: 0.0 %
    stability: ClassF()
</code></pre></article><nav class="docs-footer"><a class="docs-footer-nextpage" href="../plume/">Plume Models »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.14.1 on <span class="colophon-date" title="Friday 26 September 2025 16:06">Friday 26 September 2025</span>. Using Julia version 1.9.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
